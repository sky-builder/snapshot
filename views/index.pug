<!DOCTYPE html>
html(lang="en")
  head
    meta(charset="UTF-8")
    meta(name="viewport", content="width=device-width, initial-scale=1.0")
    link(rel="stylesheet", href="/xterm.css")
    link(rel="stylesheet", href="/bulma.min.css")
    <script src="https://cdnjs.cloudflare.com/ajax/libs/humanize-duration/3.25.0/humanize-duration.min.js" integrity="sha512-0UnIJivC9iikxy7OKQGyLFRBtayFBWmh+Fdkv0qXcMY7N1Byk0Vi+WX+7MVdXQriiBDprEqZ6Gwcd5NLyPvGjA==" crossorigin="anonymous"></script>
    link(rel="stylesheet", href="/index.css")
    title Document
  body
    div.test
      ul.test__results
        each item in results
          -
            let duration = item.endTime - item.startTime;
            duration = humanizeDuration(duration);
          //- TODO: why testResults is an Array ?
          li(class='test__result' data-id=item.id class=item.status === 'passed' ? 'test__result--passed' : 'test__result--failed')
            .test__id= '#' + item.id
            .test__status= item.status
            .test__cmd= '命令: ' + item.cmd
            .test__started= '开始时间: ' + new Date(item.startTime).toLocaleString()
            .test__finished= '结束时间: ' + new Date(item.endTime).toLocaleString()
            .test__duration= '持续时间: ' + duration
            a(href=item.htmlReport) 查看运行报告
            br
            a(href=item.imagesPath) 查看图片
      div.test__details
        button(onclick="parseCases()") pas
        button(onclick="updateTest()" class="button test-button" id="btn-update-test") update test
        button(onclick="runTest('test')" class="button test-button" id="btn-update-test") run test on test
        div
          div 测试用例
          ul
            each item in testCases
              li(class="test__user-id" data-id=item.userId)= item.userId
                ul
                  each e in item.examList
                    li(class='test__exam-id' data-id=e.examId)= e.examId
                      ul
                        each r in e.reportList
                          li(class='test__report-name' data-id=r.name)
                            label(for=`${item.userId}-${e.examId}-${r.name}`)= r.name
                            input(type="checkbox" id=`${item.userId}-${e.examId}-${r.name}` checked)
        div
          p 控制台
          <div class="test__log" id="terminal"></div>
    <script src="xterm.js"></script>
    script(src="https://cdn.jsdelivr.net/npm/axios@0.21.1/dist/axios.min.js")
    script(src="index.js")